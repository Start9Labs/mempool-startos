import { utils } from "../util";
export class CreatedAction {
    myMetaData;
    fn;
    input;
    constructor(myMetaData, fn, input) {
        this.myMetaData = myMetaData;
        this.fn = fn;
        this.input = input;
    }
    validator = this.input.validator;
    static of(metaData, fn) {
        const { input, ...rest } = metaData;
        return new CreatedAction(rest, fn, input);
    }
    exportedAction = ({ effects, input }) => {
        return this.fn({
            effects,
            utils: utils(effects),
            input: this.validator.unsafeCast(input),
        });
    };
    run = async ({ effects, input }) => {
        return this.fn({
            effects,
            utils: utils(effects),
            input: this.validator.unsafeCast(input),
        });
    };
    async getConfig({ effects }) {
        return this.input.build({
            effects,
            utils: utils(effects),
        });
    }
}
export const createAction = CreatedAction.of;
