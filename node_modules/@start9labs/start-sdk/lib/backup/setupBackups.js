import { Backups } from "./Backups";
export function setupBackups(...args) {
    const backups = Array();
    const volumes = new Set();
    for (const arg of args) {
        if (arg instanceof Backups) {
            backups.push(arg);
        }
        else {
            volumes.add(arg);
        }
    }
    backups.push(Backups.volumes(...volumes));
    return {
        get createBackup() {
            return (async (options) => {
                for (const backup of backups) {
                    await backup.build().createBackup(options);
                }
            });
        },
        get restoreBackup() {
            return (async (options) => {
                for (const backup of backups) {
                    await backup.build().restoreBackup(options);
                }
            });
        },
    };
}
